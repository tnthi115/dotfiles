#

# See full config options:
# https://github.com/jesseduffield/lazygit/blob/master/docs/Config.md

gui:
  enlargedSideViewLocation: top
  nerdFontsVersion: "3"
  showFileIcons: true
git:
  paging:
    colorArg: always
    # useConfig: true
    pager: delta --dark --paging=never
  commit:
    autoWrapCommitMessage: false
customCommands:
  - key: "Z"
    command: "git cz c"
    description: "Commit with commitizen."
    context: "files"
    loadingText: "Opening commitizen commit tool"
    output: terminal
  - key: "O"
    context: "files"
    command: 'opencode run --mode build --model github-copilot/gpt-4.1 "Analyze the current staged changes in this repository and generate a commit message in the Conventional Commits format. If there is an AGENTS.md in the project (such as .config/opencode/AGENTS.md or ./AGENTS.md), follow all code style, workflow, and security guidelines in that file. If not, and if ~/.config/opencode/AGENTS.md exists, use those guidelines instead. Use a clear, descriptive subject line and, if appropriate, include a body with further details. Then, use this message to make the commit for the staged changes. Output only the commit message and the commit result with clear and clean formatting."'
    description: "Generate and make Conventional Commit with opencode (prefers global AGENTS.md, then project)"
    output: terminal
    prompts:
      - type: "confirm"
        title: "Generate and commit with opencode"
        body: "Generate a Conventional Commit message for the current staged changes and make the commit using opencode?"
  - key: "O"
    context: "commits"
    description: "Reword commit message with opencode (HEAD or non-HEAD, automated)"
    command: '~/dotfiles/lazygit/bin/reword-commit-with-opencode.sh {{.SelectedCommit.Sha}} "{{.Form.extra}}"'
    output: terminal
    prompts:
      - type: "input"
        title: "Extra instructions for opencode (optional)"
        initialValue: ""
        key: "extra"
      - type: "confirm"
        title: "Reword commit with opencode"
        body: "Are you sure you want to reword the selected commit using opencode? This will rewrite history for non-HEAD commits."
  # - key: "m"
  #   command: "glab mr create --assignee t.thi --draft --fill --fill-commit-body --remove-source-branch --squash-before-merge --web"
  #   description: "Create gitlab MR with glab cli."
  #   context: "localBranches"
  #   loadingText: "Creating MR"
  #   prompts:
  #     - type: "confirm"
  #       title: "Create MR"
  #       body: "Are you sure you want to create the MR?"
  #   output: terminal
os:
  openLink: open "$(echo "{{link}}" | sed 's/%2F/\//g')"
