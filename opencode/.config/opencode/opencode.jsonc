{
  "$schema": "https://opencode.ai/config.json",
  "share": "manual",
  "autoupdate": true,
  "theme": "tymon-kanagawa",
  "instructions": [
    "*/AGENTS.md",
    "AGENTS.md",
    "README.md",
    "docs/**/*.md",
    "docs/**/*.puml",
    "pbdoc/docs.md",
  ],
  "provider": {
    "f5": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "f5",
      "options": {
        "baseURL": "https://f5ai.pd.f5net.com/openai/",
        // Set your OPENAI_API_KEY environment variable, or read it from a file
        // "apiKey": "file:~/.openai_api_key",
        "apiKey": "{env:OPENAI_API_KEY}",
      },
      "models": {
        "gpt-5": {
          "name": "gpt-5",
        },
        "gpt-5-mini": {
          "name": "gpt-5-mini",
        },
        "gpt-5-nano": {
          "name": "gpt-5-nano",
        },
        "gpt-4.1": {
          "name": "gpt-4.1",
        },
        "gpt-4.1-mini": {
          "name": "gpt-4.1-mini",
        },
        "gpt-4o": {
          "name": "gpt-4o",
        },
        "gpt-4o-mini": {
          "name": "gpt-4o-mini",
        },
        "o4-mini": {
          "name": "o4-mini",
        },
        "o3": {
          "name": "o3",
        },
        "o3-mini": {
          "name": "o3-mini",
        },
        "o1": {
          "name": "o1",
        },
      },
    },
  },
  "mode": {
    "plan": {
      "model": "github-copilot/claude-sonnet-4",
    },
    "build": {
      "model": "github-copilot/claude-sonnet-4",
    },
  },
  "mcp": {
    "git": {
      "type": "local",
      "command": ["uvx", "mcp-server-git", "--repository", "${PWD}"],
    },
    "gitlab": {
      "type": "local",
      "command": ["npx", "-y", "@zereight/mcp-gitlab"],
      "environment": {
        "GITLAB_PERSONAL_ACCESS_TOKEN": "${GITLAB_TOKEN}",
        "GITLAB_API_URL": "https://gitlab.com/api/v4/",
        "GITLAB_READ_ONLY_MODE": "false",
        "USE_GITLAB_WIKI": "false",
        "USE_MILESTONE": "false",
        "USE_PIPELINE": "false",
      },
    },
    "context7": {
      "type": "local",
      "command": ["npx", "-y", "@upstash/context7-mcp"],
      "environment": {
        "DEFAULT_MINIMUM_TOKENS": "5000",
      },
    },
  },
  "agent": {
    "code-reviewer": {
      "description": "Reviews code for best practices and potential issues",
      "mode": "subagent",
      "model": "github-copilot/claude-sonnet-4",
      "prompt": "You are a code reviewer. Focus on security, performance, and maintainability.",
      "tools": {
        "write": false,
        "edit": false,
      },
    },
  },
  "command": {
    "plan": {
      "template": "Create a comprehensive implementation plan for: $ARGUMENTS\n\nAnalyze the current project structure and requirements:\n!`find . -type f -name \"*.md\" -o -name \"*.json\" -o -name \"*.js\" -o -name \"*.ts\" -o -name \"*.py\" -o -name \"*.go\" | head -20`\n\nCurrent git status:\n!`git status --porcelain`\n\nRecent commits for context:\n!`git log --oneline -5`\n\nBased on this analysis, create a detailed plan that includes:\n\n1. **Objective & Scope**\n   - Clear problem statement\n   - Success criteria\n   - Scope boundaries\n\n2. **Technical Analysis**\n   - Current state assessment\n   - Dependencies and constraints\n   - Technology stack considerations\n\n3. **Implementation Strategy**\n   - Step-by-step breakdown\n   - Timeline estimates\n   - Risk assessment\n\n4. **Validation Plan**\n   - Testing approach\n   - Quality gates\n   - Rollback strategy\n\nSave the plan as a markdown document with a descriptive filename based on the requested feature or task.",
      "description": "Create a detailed implementation plan",
      "agent": "build",
      "model": "github-copilot/claude-sonnet-4",
    },
    "analyze-codebase": {
      "template": "Perform comprehensive codebase analysis and generate an optimized AGENTS.md file for the current project.\n\n## Project Context Analysis\n\nCurrent directory structure overview:\n!`find . -maxdepth 3 -type f -name \"*.json\" -o -name \"*.toml\" -o -name \"*.yml\" -o -name \"*.yaml\" -o -name \"Makefile\" -o -name \"Dockerfile\" | head -20`\n\nProject type detection:\n!`ls -la | grep -E \"(package\\.json|go\\.mod|pyproject\\.toml|requirements\\.txt|Cargo\\.toml)\"`\n\nRepository status:\n!`git status --porcelain | head -10`\n\nFile count analysis:\n!`find . -type f -not -path \"./.git/*\" -not -path \"./node_modules/*\" -not -path \"./dist/*\" -not -path \"./build/*\" | wc -l`\n\n## Analysis Objectives\n\nPerform comprehensive analysis to generate an accurate AGENTS.md file that includes:\n\n1. **Repository Purpose & Architecture**\n   - Identify project type and core purpose from actual files and structure\n   - Analyze complete technology stack and dependencies with exact versions\n   - Extract real commands from configuration files (package.json, Makefile, scripts)\n\n2. **Development Environment Setup**\n   - Detect prerequisites and installation requirements from project files\n   - Extract actual build, test, and development commands that exist in the project\n   - Validate all commands work in the current environment\n\n3. **Code Style & Architecture Guidelines**\n   - Analyze actual code patterns and conventions from source files\n   - Identify architecture patterns (Clean Architecture, MVC, microservices) used in the project\n   - Extract naming conventions from real code samples and directory structure\n\n4. **Agent Optimization Guidelines**\n   - Create project-specific guidance for AI agents based on actual project patterns\n   - Define quality gates and automated checks from existing configurations\n   - Identify common patterns and troubleshooting approaches from the codebase\n\n## Analysis Requirements\n\n- **Template-Driven Analysis**: Use appropriate specialized template based on detected project type\n- **Real Commands Only**: Extract actual commands from package.json, Makefile, scripts - never generate hypothetical commands\n- **Verified Paths**: Reference only existing files and directories found in the project\n- **Project-Specific Content**: Base all analysis on actual code patterns, not generic templates or assumptions\n- **Quality Validation**: Test all commands and references before inclusion in AGENTS.md\n\n## Output Requirements\n\nGenerate a complete, accurate AGENTS.md file that:\n- Enables any AI agent to work effectively in this codebase immediately\n- Contains only verified, working commands extracted from the project\n- Provides specific, actionable guidance based on actual project structure and patterns\n- Follows the comprehensive structure defined in the codebase-analyzer template\n- Uses the detected project template (React SPA, Node.js API, Go microservice, Python ML, Static site) for targeted analysis\n\nFocus on accuracy over comprehensiveness. Better to have fewer correct commands than many incorrect ones.\n\nAnalyze the current working directory as the target project and generate the AGENTS.md file in the project root.",
      "description": "Analyze codebase and generate comprehensive AGENTS.md file",
      "agent": "codebase-analyzer",
      "model": "github-copilot/claude-sonnet-4",
      "subtask": true,
    },
  },
  "formatter": {
    "prettier": {
      "command": ["prettier", "--write", "$FILE"],
      "extensions": [
        ".js",
        ".jsx",
        ".ts",
        ".tsx",
        ".json",
        ".html",
        ".css",
        ".scss",
        ".less",
        ".md",
        ".yaml",
        ".yml",
      ],
    },
    "black": {
      "command": ["black", "$FILE"],
      "extensions": [".py", ".pyi"],
    },
    "ruff": {
      "command": ["ruff", "format", "$FILE"],
      "extensions": [".py", ".pyi"],
    },
    "stylua": {
      "command": ["stylua", "$FILE"],
      "extensions": [".lua"],
    },
    "shfmt": {
      "command": ["shfmt", "-i", "2", "-ci", "$FILE"],
      "extensions": [".sh", ".bash", ".zsh"],
    },
    "gofumpt": {
      "command": ["gofumpt", "-w", "$FILE"],
      "extensions": [".go"],
    },
    "taplo": {
      "command": ["taplo", "format", "$FILE"],
      "extensions": [".toml"],
    },
    "usort": {
      "command": ["usort", "format", "$FILE"],
      "extensions": [".py", ".pyi"],
    },
  },
  "lsp": {
    "bash-language-server": {
      "command": ["bash-language-server", "start"],
      "extensions": [".sh", ".bash", ".zsh"],
    },
    "lua-language-server": {
      "command": ["lua-language-server"],
      "extensions": [".lua"],
    },
    "gopls": {
      "command": ["gopls"],
      "extensions": [".go", ".mod", ".sum"],
    },
    "rust-analyzer": {
      "command": ["rust-analyzer"],
      "extensions": [".rs"],
    },
    "basedpyright": {
      "command": ["basedpyright-langserver", "--stdio"],
      "extensions": [".py", ".pyi"],
    },
    "vtsls": {
      "command": ["vtsls", "--stdio"],
      "extensions": [
        ".js",
        ".jsx",
        ".ts",
        ".tsx",
        ".mjs",
        ".cjs",
        ".mts",
        ".cts",
      ],
    },
    "yaml-language-server": {
      "command": ["yaml-language-server", "--stdio"],
      "extensions": [".yaml", ".yml"],
    },
    "marksman": {
      "command": ["marksman", "server"],
      "extensions": [".md", ".markdown"],
    },
    "docker-langserver": {
      "command": ["docker-langserver", "--stdio"],
      "extensions": [".dockerfile", "Dockerfile*"],
    },
    "docker-compose-langserver": {
      "command": ["docker-compose-langserver", "--stdio"],
      "extensions": [
        "docker-compose.yml",
        "docker-compose.yaml",
        "compose.yml",
        "compose.yaml",
      ],
    },
    "jsonnet-language-server": {
      "command": ["jsonnet-language-server"],
      "extensions": [".jsonnet", ".libsonnet"],
    },
    "fish-lsp": {
      "command": ["fish-lsp", "start"],
      "extensions": [".fish"],
    },
    "golangci-lint-langserver": {
      "command": ["golangci-lint-langserver"],
      "extensions": [".go"],
    },
    "taplo": {
      "command": ["taplo", "lsp", "stdio"],
      "extensions": [".toml"],
    },
  },
}
